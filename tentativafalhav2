#include<iostream>

using namespace std;
int ctn=0;
struct pilha{
    int val;
    pilha *next;
};

int top_val(pilha *top){
    return top->val;
}

bool empty_stack(pilha *top){
    if(top->next=nullptr){
        return true;
    }
    else{
        return false;
    }
}

pilha *push_up(pilha *head, pilha *top, int val){
    pilha *n=nullptr;
    n = new pilha;
    n->val = val;
    n->next=nullptr;
    top->next = n;
    ctn++;
    return n;
}

pilha *pop_back(pilha *head){
    pilha *curr=head;
    pilha *old=head;
    while(!empty_stack(curr)){
        old = curr;
        curr = curr->next;
    }
    old->next=nullptr;
    delete curr;
    ctn--;
    return old;
} 

void show(pilha *head){
    pilha *curr=nullptr;
    curr = head->next;
    while(curr!=nullptr){
        cout << curr->val << "  ";
        curr = curr->next;
    }
    cout << "fim da pilha com: " << ctn << " elementos" << endl;
}

int main(void){    
    pilha *head=nullptr;
    pilha *top=nullptr;
    head = new pilha;
    head->next=nullptr;
    top = head;
    int i;
    cout << "1" << endl;
    for(i=0;i<8;i++){
        top = push_up(head,top,i);
        show(head);
    }
    cout << "2" << endl;
    while(head->val!=0){
        top = pop_back(head);
        show(head);
    } 
    cout << "3" << endl;
    return 0;
}
